<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BucketL!st</title>
  </head>
  <link rel="stylesheet" href="style.css" />

  <nav>
    <ul>
      <li><a href="Home">Home</a></li>
      <li><a href="Blog">Blog</a></li>
      <li><a href="Contact">Contact</a></li>
    </ul>
  </nav>
  <h1 class="glow">BucketL!st</h1>

  <body>
    <form
      action="http://localhost:8080/upload"
      enctype="multipart/form-data"
      method="post"
    >
      <input class="uno" type="file" name="myFile" />
      <input type="submit" value="Upload File..." />
    </form>

    <div id="postDiv" class="posts"></div>
  </body>
</html>

<script>
  async function FetchPosts() {
    const response = await fetch("http://localhost:8080/posts", {
      method: "GET",
      mode: "cors",
      cache: "no-cache",
      credentials: "same-origin",
      headers: {
        "Content-Type": "application/json",
      },
      redirect: "follow",
      referrerPolicy: "no-referrer",
    });

    const allpics = await response.json();
    var postsSection = document.getElementById("postDiv");
    if (allpics.length > 0) {
      allpics.forEach((pic) => {
        postsSection.innerHTML += `<img class="post" src="../Server/temp/${pic}" alt="" />`;
      });
    }
  }
  FetchPosts();
</script>
